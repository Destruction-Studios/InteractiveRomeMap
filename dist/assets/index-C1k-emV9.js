(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const w of s.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&r(w)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const u=document.getElementById("map"),O=document.getElementById("map-contents"),l=document.getElementById("tooltip"),c=.15;let Y=0,A=0,v=!1,P=0,$=0,m=0,f=0,y=0,g=0,b=1,d=1;const _=.8,C=5.5,H=.001;let a=null,M=0,p=0,h=0,S=0,x=0;const i=(e,t,o)=>e+(t-e)*o;u.addEventListener("mousedown",e=>{console.log("Start drag map"),v=!0,P=e.clientX-m,$=e.clientY-f});document.addEventListener("mousemove",e=>{Y=e.clientX,A=e.clientY,v&&(y=e.clientX-P,g=e.clientY-$)});document.addEventListener("mouseup",()=>{v=!1});u.addEventListener("wheel",e=>{e.preventDefault();const t=Math.exp(-e.deltaY*H),o=Math.min(C,Math.max(_,d*t)),r=u.createSVGPoint();r.x=e.clientX,r.y=e.clientY;const n=r.matrixTransform(u.getScreenCTM().inverse());y=n.x-(n.x-y)*(o/d),g=n.y-(n.y-g)*(o/d),d=o},{passive:!1});function Z(){document.querySelectorAll("#map-i a").forEach(t=>{const o=a=t.dataset.location;t.addEventListener("mouseenter",r=>{a=o,p=r.clientX+12,h=r.clientY+12}),t.addEventListener("mouseleave",r=>{a==o&&(a=null)})})}function R(){return fetch("/map.txt").then(e=>e.text()).then(e=>{O.innerHTML=e}).finally(Z)}function B(){m=i(m,y,c),f=i(f,g,c),p=i(p,S,c),h=i(h,x,c),b=i(b,d,c),O.setAttribute("transform",`translate(${m}, ${f}) scale(${b})`);const e=performance.now();x=A-24,S=Y+12,a==null?e-M>75&&(l.style.display="none"):(M=e,l.style.display="",l.innerHTML=a,l.style.left=`${p}px`,l.style.top=`${h}px`),requestAnimationFrame(B)}const q=R().then(()=>{B()}),X=document.getElementById("sidebar"),z=document.getElementById("sidebar-resizer"),N=document.getElementById("sidebar-header"),D=document.getElementById("sidebar-content"),F="home",j=175,G=500;let E=!1,L={};z.addEventListener("mousedown",()=>{E=!0,document.body.style.cursor="ew-resize",document.body.style.userSelect="none"});document.addEventListener("mousemove",e=>{if(!E)return;const t=e.clientX-X.getBoundingClientRect().left;t>=j&&t<=G&&(X.style.width=`${t}px`)});document.addEventListener("mouseup",()=>{E&&(E=!1,document.body.style.cursor="",document.body.style.userSelect="")});function K(){return fetch("/sidebar_profiles/tabs.json").then(e=>e.json()).then(async e=>{for(const t in e){const o=e[t],r=`/sidebar_profiles/${t}.html`,s=await(await fetch(r)).text();L[t]={header:o.header,contents:s}}})}function I(){const e=window.location.hash.replace("#","");if(console.log(`Hash changed: ${e}`),!e){T(F);return}T(e.toLowerCase())}function U(){const e=document.querySelectorAll(".map-location");console.log(e),e.forEach(t=>{const o=t.dataset.location;t.addEventListener("mousedown",()=>{window.location.hash=`${o.toLowerCase()}`})})}function T(e){console.log(`Setting tab: ${e}`);let t=L[e];t==null&&(t=L.error),N.innerText=t.header,D.innerHTML=t.contents}async function V(){await K(),U(),I(),window.addEventListener("hashchange",I)}const W=document.querySelectorAll(".linkable-text");W.forEach(e=>{const t=e.dataset.url;e.addEventListener("click",()=>{window.open(t,"_blank")})});console.log("Awaiting map...");await q;console.log("Map ready!");await V();console.log("Sidebar loaded");
