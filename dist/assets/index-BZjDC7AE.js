(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const L of o.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&s(L)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const u=document.getElementById("map"),x=document.getElementById("map-contents"),c=document.getElementById("tooltip"),i=.15;let O=0,Y=0,M=!1,I=0,P=0,m=0,f=0,g=0,E=0,h=1,d=1;const A=.8,B=5.5,T=.001;let l=null,S=0,p=0,y=0,X=0,b=0;const a=(e,n,r)=>e+(n-e)*r;u.addEventListener("mousedown",e=>{console.log("Start drag map"),M=!0,I=e.clientX-m,P=e.clientY-f});document.addEventListener("mousemove",e=>{O=e.clientX,Y=e.clientY,M&&(g=e.clientX-I,E=e.clientY-P)});document.addEventListener("mouseup",()=>{M=!1});u.addEventListener("wheel",e=>{e.preventDefault();const n=Math.exp(-e.deltaY*T),r=Math.min(B,Math.max(A,d*n)),s=u.createSVGPoint();s.x=e.clientX,s.y=e.clientY;const t=s.matrixTransform(u.getScreenCTM().inverse());g=t.x-(t.x-g)*(r/d),E=t.y-(t.y-E)*(r/d),d=r},{passive:!1});function _(){document.querySelectorAll("#map-i a").forEach(n=>{const r=l=n.dataset.location;n.addEventListener("mouseenter",s=>{l=r,p=s.clientX+12,y=s.clientY+12}),n.addEventListener("mouseleave",s=>{l==r&&(l=null)})})}function $(){fetch("src/assets/map.txt").then(e=>e.text()).then(e=>{x.innerHTML=e}).finally(_)}function Z(){m=a(m,g,i),f=a(f,E,i),p=a(p,X,i),y=a(y,b,i),h=a(h,d,i),x.setAttribute("transform",`translate(${m}, ${f}) scale(${h})`);const e=performance.now();b=Y-24,X=O+12,l==null?e-S>75&&(c.style.display="none"):(S=e,c.style.display="",c.innerHTML=l,c.style.left=`${p}px`,c.style.top=`${y}px`),requestAnimationFrame(Z)}$();Z();const z=document.querySelectorAll(".linkable-text");z.forEach(e=>{const n=e.dataset.url;e.addEventListener("click",()=>{window.open(n,"_blank")})});const w=document.getElementById("sidebar"),N=document.getElementById("sidebar-resizer"),q=175,C=500;let v=!1;N.addEventListener("mousedown",()=>{v=!0,document.body.style.cursor="ew-resize",document.body.style.userSelect="none"});document.addEventListener("mousemove",e=>{if(!v)return;const n=e.clientX-w.getBoundingClientRect().left;n>=q&&n<=C&&(w.style.width=`${n}px`)});document.addEventListener("mouseup",()=>{v&&(v=!1,document.body.style.cursor="",document.body.style.userSelect="")});
